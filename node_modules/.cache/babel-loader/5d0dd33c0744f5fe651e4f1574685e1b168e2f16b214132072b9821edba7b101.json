{"ast":null,"code":"import _toConsumableArray from\"C:/Users/Guilherme/Documents/React Projects/Technical-test/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/Guilherme/Documents/React Projects/Technical-test/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from'react';import{AiOutlineArrowLeft,AiOutlineArrowRight}from'react-icons/ai';import'./App.scss';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";export default function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),undoDiff=_useState2[0],setUndoDiff=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),circles=_useState4[0],setCircles=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),mousePos=_useState6[0],setMousePos=_useState6[1];function removeLast(){if(circles.length>0){setCircles(function(prev){return prev.filter(function(el){return el.idx!==prev.length-1;});});setUndoDiff(function(prev){return[].concat(_toConsumableArray(prev),[circles.filter(function(el){return el.idx===circles.length-1;})[0]]);});}}function restoreElement(){if(undoDiff.length>0){setCircles(function(prev){return[].concat(_toConsumableArray(prev),[undoDiff[undoDiff.length-1]]);});setUndoDiff(function(prev){return prev.slice(0,-1);});}}useEffect(function(){var handleMouseMove=function handleMouseMove(event){setMousePos({x:Math.ceil(event.clientX),y:Math.ceil(event.clientY)});var circle={idx:circles.length,x:Math.ceil(event.clientX),y:Math.ceil(event.clientY)};setCircles(function(prev){return[].concat(_toConsumableArray(prev),[circle]);});};document.getElementById('content').addEventListener('pointerdown',handleMouseMove);return function(){document.getElementById('content').removeEventListener('pointerdown',handleMouseMove);};},[circles]);useEffect(function(){function handleResize(){// Reset all states to prevent circles to go out of the screen in resizes\nsetCircles([]);setUndoDiff([]);setMousePos([]);}window.addEventListener('resize',handleResize);return function(){window.removeEventListener('resize',handleResize);};},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"app\",id:\"app\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"navbar\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mousePos\",children:[\"The mouse is at position\",' ',/*#__PURE__*/_jsxs(\"b\",{children:[\"(\",mousePos.x,\", \",mousePos.y,\")\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"button-prev-undo\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){e.stopPropagation();removeLast();},children:/*#__PURE__*/_jsx(AiOutlineArrowLeft,{})}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){e.stopPropagation();restoreElement();},children:/*#__PURE__*/_jsx(AiOutlineArrowRight,{})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"content\",id:\"content\",children:circles.map(function(circle,idx){return/*#__PURE__*/_jsx(\"div\",{className:\"circle\",style:{position:'absolute',left:circle.x-25,top:circle.y-25},children:circle.idx},idx);})})]});}","map":{"version":3,"names":["useEffect","useState","AiOutlineArrowLeft","AiOutlineArrowRight","App","undoDiff","setUndoDiff","circles","setCircles","mousePos","setMousePos","removeLast","length","prev","filter","el","idx","restoreElement","slice","handleMouseMove","event","x","Math","ceil","clientX","y","clientY","circle","document","getElementById","addEventListener","removeEventListener","handleResize","window","e","stopPropagation","map","position","left","top"],"sources":["C:/Users/Guilherme/Documents/React Projects/Technical-test/src/App.js"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { AiOutlineArrowLeft, AiOutlineArrowRight } from 'react-icons/ai'\nimport './App.scss';\n\nexport default function App() {\n  const [undoDiff, setUndoDiff] = useState([]);\n  const [circles, setCircles] = useState([]);\n  const [mousePos, setMousePos] = useState({});\n\n  function removeLast() {\n    if (circles.length > 0) {\n      setCircles(prev => prev.filter((el) => el.idx !== prev.length - 1))\n      setUndoDiff(prev => [...prev, circles.filter((el) => el.idx === circles.length - 1)[0]])\n    }\n  }\n\n  function restoreElement() {\n    if (undoDiff.length > 0) {\n      setCircles(prev => [...prev, undoDiff[undoDiff.length - 1]])\n      setUndoDiff(prev => prev.slice(0, -1))\n    }\n  }\n\n  useEffect(() => {\n    const handleMouseMove = (event) => {\n      setMousePos({ x: Math.ceil(event.clientX), y: Math.ceil(event.clientY) });\n      const circle = {\n        idx: circles.length,\n        x: Math.ceil(event.clientX), \n        y: Math.ceil(event.clientY),\n      }\n      setCircles(prev => [...prev, circle])\n    };\n\n    document.getElementById('content').addEventListener('pointerdown', handleMouseMove);\n\n    return () => {\n     document.getElementById('content').removeEventListener('pointerdown', handleMouseMove);\n    };\n  }, [circles]);\n\n  useEffect(() => {\n    function handleResize() { // Reset all states to prevent circles to go out of the screen in resizes\n      setCircles([])\n      setUndoDiff([])\n      setMousePos([])\n    }\n    window.addEventListener('resize', handleResize)\n\n    return () => {\n      window.removeEventListener('resize', handleResize)\n    }\n  }, [])\n\n\n  return (\n    <div className=\"app\" id='app'>\n      <div className='navbar'>\n\n        <div className='mousePos'>\n          The mouse is at position{' '}\n          <b>\n            ({mousePos.x}, {mousePos.y})\n          </b>\n        </div>\n\n        <div className='button-prev-undo'>\n          <button onClick={(e) => {e.stopPropagation(); removeLast()}}><AiOutlineArrowLeft/></button>\n          <button onClick={(e) => {e.stopPropagation(); restoreElement()}}><AiOutlineArrowRight/></button>\n        </div>\n        \n      </div>\n\n      <div className='content' id='content'>\n        {\n          circles.map(((circle, idx) => {\n            return (\n              <div className='circle' key={idx} style={{position: 'absolute', left: circle.x - 25, top: circle.y - 25}}>\n                {circle.idx}\n              </div>\n            )\n          }))\n        }\n      </div>\n    </div>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}